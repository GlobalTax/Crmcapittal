{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/schemas/ma_objects.schema.json",
  "title": "M&A Objects Schema",
  "description": "JSON Schema for M&A CRM entities: Deal, Company, Contact, and Activity",
  "definitions": {
    "Deal": {
      "type": "object",
      "title": "Deal Entity",
      "description": "Represents a deal in the M&A pipeline",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the deal"
        },
        "name": {
          "type": "string",
          "description": "Deal name or opportunity title"
        },
        "mandateType": {
          "type": "string",
          "enum": ["Sell", "Buy"],
          "description": "Type of mandate: Sell-side or Buy-side"
        },
        "sector": {
          "type": "string",
          "description": "Industry sector (NAICS code or description)"
        },
        "evMin": {
          "type": "number",
          "minimum": 0,
          "description": "Minimum enterprise value in euros"
        },
        "evMax": {
          "type": "number",
          "minimum": 0,
          "description": "Maximum enterprise value in euros"
        },
        "stage": {
          "type": "string",
          "enum": ["New Lead", "Qualified", "NDA Sent", "NDA Signed", "Info Shared", "Negotiation", "Mandate Signed", "Closed Lost"],
          "description": "Current stage in the pipeline"
        },
        "probabilityPct": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Probability percentage based on stage"
        },
        "feeModel": {
          "type": "string",
          "enum": ["percentage", "fixed"],
          "description": "Fee structure model"
        },
        "closeTargetDate": {
          "type": "string",
          "format": "date",
          "description": "Target closing date"
        },
        "companyId": {
          "type": "string",
          "description": "Associated company ID"
        },
        "contactId": {
          "type": "string",
          "description": "Primary contact ID"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Last update timestamp"
        },
        "metadata": {
          "type": "object",
          "description": "Additional metadata for future extensions",
          "additionalProperties": true
        }
      },
      "required": ["id", "name", "mandateType", "sector", "evMin", "evMax", "stage", "probabilityPct"],
      "additionalProperties": false
    },
    "Company": {
      "type": "object",
      "title": "Company Entity",
      "description": "Represents a company in the CRM system",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the company"
        },
        "name": {
          "type": "string",
          "description": "Company name"
        },
        "sector": {
          "type": "string",
          "description": "Industry sector"
        },
        "country": {
          "type": "string",
          "description": "Country where the company is located"
        },
        "ebitdaLtm": {
          "type": "number",
          "description": "EBITDA Last Twelve Months in euros"
        },
        "ingresos_ltm": {
          "type": "number",
          "description": "Revenue Last Twelve Months in euros"
        },
        "website": {
          "type": "string",
          "format": "uri",
          "description": "Company website URL"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Last update timestamp"
        },
        "metadata": {
          "type": "object",
          "description": "Additional metadata for future extensions",
          "additionalProperties": true
        }
      },
      "required": ["id", "name", "sector", "country"],
      "additionalProperties": false
    },
    "Contact": {
      "type": "object",
      "title": "Contact Entity",
      "description": "Represents a contact person in the CRM system",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the contact"
        },
        "name": {
          "type": "string",
          "description": "Contact full name"
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "Contact email address"
        },
        "phone": {
          "type": "string",
          "description": "Contact phone number"
        },
        "role": {
          "type": "string",
          "description": "Contact role or position"
        },
        "influence": {
          "type": "number",
          "minimum": 0,
          "maximum": 5,
          "description": "Influence level from 0 to 5"
        },
        "language": {
          "type": "string",
          "description": "Preferred language"
        },
        "companyId": {
          "type": "string",
          "description": "Associated company ID"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Last update timestamp"
        },
        "metadata": {
          "type": "object",
          "description": "Additional metadata for future extensions",
          "additionalProperties": true
        }
      },
      "required": ["id", "name", "email"],
      "additionalProperties": false
    },
    "Activity": {
      "type": "object",
      "title": "Activity Entity",
      "description": "Represents an activity or interaction in the CRM system",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the activity"
        },
        "type": {
          "type": "string",
          "enum": ["call", "email", "meeting"],
          "description": "Type of activity"
        },
        "title": {
          "type": "string",
          "description": "Activity title or subject"
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the activity"
        },
        "result": {
          "type": "string",
          "description": "Outcome or result of the activity"
        },
        "nextStep": {
          "type": "string",
          "description": "Next step or follow-up action"
        },
        "dueDate": {
          "type": "string",
          "format": "date-time",
          "description": "Due date for the activity"
        },
        "dealId": {
          "type": "string",
          "description": "Associated deal ID"
        },
        "contactId": {
          "type": "string",
          "description": "Associated contact ID"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Last update timestamp"
        },
        "metadata": {
          "type": "object",
          "description": "Additional metadata for future extensions",
          "additionalProperties": true
        }
      },
      "required": ["id", "type", "title"],
      "additionalProperties": false
    }
  }
}